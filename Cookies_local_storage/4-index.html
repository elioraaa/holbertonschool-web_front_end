<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />

    <style>
        #loginForm {
            display: none;
        }

        #loginForm input {
            margin-right: 10px;
            padding: 4px 6px;
        }

        #loginForm button {
            padding: 4px 10px;
            cursor: pointer;
        }
    </style>
</head>

<body>

    <div id="loginForm">
        <h2>Login to the website</h2>

        <input type="text" id="firstname" placeholder="Firstname" />
        <input type="text" id="email" placeholder="Email" />

        <button id="loginBtn">Log me in</button>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.5/dist/js.cookie.min.js"></script>

    <script>
        const loginForm = document.getElementById("loginForm");
        const loginBtn = document.getElementById("loginBtn");


        function showForm() {
            const welcome = document.getElementById("welcomeMessage");
            if (welcome) welcome.remove();


            document.body.innerHTML = "";
            document.body.appendChild(loginForm);

            loginForm.style.display = "block";
        }

        function hideForm() {
            loginForm.style.display = "none";
        }

        function deleteCookiesAndShowForm() {
            Cookies.remove("firstname", { path: "/" });
            Cookies.remove("email", { path: "/" });

            showForm();
        }


        function setCookiesAndShowWelcomeMessage() {
            const firstname = document.getElementById("firstname").value;
            const email = document.getElementById("email").value;


            Cookies.set("firstname", firstname, { expires: 10, path: "/" });
            Cookies.set("email", email, { expires: 10, path: "/" });

            showWelcomeMessageOrForm();
        }

        function showWelcomeMessageOrForm() {

            const firstname = Cookies.get("firstname") || "";

            if (!firstname) {
                showForm();
                return;
            }

            hideForm();
            document.body.innerHTML = "";


            const h1 = document.createElement("h1");
            h1.id = "welcomeMessage";
            h1.appendChild(document.createTextNode("Welcome " + firstname + " "));

            const logoutLink = document.createElement("a");
            logoutLink.href = "#";
            logoutLink.appendChild(document.createTextNode("(logout)"));


            logoutLink.style.fontWeight = "normal";
            logoutLink.style.fontStyle = "italic";
            logoutLink.style.marginLeft = "10px";

            logoutLink.addEventListener("click", function (e) {
                e.preventDefault();
                deleteCookiesAndShowForm();
            });

            h1.appendChild(logoutLink);
            document.body.appendChild(h1);
        }


        loginBtn.addEventListener("click", setCookiesAndShowWelcomeMessage);


        showWelcomeMessageOrForm();
    </script>
</body>

</html>